camera_url: http://YOUR_CAMERA_HOST:PORT/stream
logging:
  level: INFO
capture:
  # 每秒处理的帧数（人脸 + 姿势检测），调低可降低 CPU/网络负载
  target_fps: 5
  reconnect_delay: 5
  max_retries: 5
face_recognition:
  known_dir: data/known
  tolerance: 0.6
  location_model: hog
  min_face_area_ratio: 0.01  # 忽略面积低于 1% 的人脸框，过滤远处衣物等误检
face_capture:
  enable: true
  root: data/captures
  date_folder_format: '%Y%m%d'
  time_format: '%H%M%S'
  groups: []  # 空列表表示不按分组过滤，填写 ["child"] 仅保存孩子
posture:
  nose_drop: -0.0521
  neck_angle: 163.19  # 设为 null 可禁用颈部前伸检测
  visibility_threshold: 0.5  # 降低可见度阈值会放宽检测，设为 null 可关闭可见度过滤
storage:
  postgres_dsn: postgresql://USER:PASSWORD@HOST/DATABASE
  table_name: posture_events
  face_table_name: face_captures
  reset_on_start: false
face_capture_retention:
  max_rows: 20000        # 最多保留条数；设为 null 关闭  单张 142 KB 20,000 张 ≈ 2 × 1.35 GB ≈ 2.7 GB
  max_age_days: 30       # 最多保留天数；设为 null 关闭
  interval_seconds: 600  # 检查间隔
posture_metadata:
  calibrated_at: '2025-11-22T23:58:14.079668Z'
  samples: 30
  nose_margin: 0.03
  angle_margin: 5.0
  avg_drop: -0.0821
  avg_angle: 158.19
pir_sensor:
  enable: true
  gpio_pin: 23  # BCM pin number for HS-SR501 OUT
  no_face_timeout_seconds: 10

dht22:
  enable: false               # 设 true 开启温湿度采集（需 adafruit-circuitpython-dht + blinka）
  gpio_pin: 4                 # DHT22 数据脚对应的 BCM 引脚
  poll_interval_seconds: 60   # 采样间隔（秒）
  retention_days: 3           # 仅保留最近 N 天的数据；设为 null 关闭自动清理

server:
  external_port: 5009  # 外部暴露端口 (Nginx 监听)
  backend_bind: 127.0.0.1:8000  # Rust 后端内部监听地址

auth:
  username: admin        # 登录用户名（请修改）
  password: change-me    # 登录密码（请修改）
  secret: change-me-please-very-long-secret # JWT 签名密钥（务必改为高强度随机串）
  session_minutes: 5     # JWT 有效期（分钟）

ssl:
  domain: "example.com"          # e.g. proxy.example.com
  wildcard: false     # set true to request *.domain + root
  dp_id: "DNSPOD_ID"           # DNSPod API ID
  dp_key: "DNSPOD_TOKEN"          # DNSPod API Token (keep this file private)
  acme_email: "you@example.com"      # optional: Let's Encrypt account email
  acme_server: "letsencrypt"
  reload_cmd: ""      # optional: e.g. systemctl reload nginx
